(function(t){function e(e){for(var s,o,r=e[0],l=e[1],c=e[2],h=0,d=[];h<r.length;h++)o=r[h],Object.prototype.hasOwnProperty.call(a,o)&&a[o]&&d.push(a[o][0]),a[o]=0;for(s in l)Object.prototype.hasOwnProperty.call(l,s)&&(t[s]=l[s]);u&&u(e);while(d.length)d.shift()();return i.push.apply(i,c||[]),n()}function n(){for(var t,e=0;e<i.length;e++){for(var n=i[e],s=!0,r=1;r<n.length;r++){var l=n[r];0!==a[l]&&(s=!1)}s&&(i.splice(e--,1),t=o(o.s=n[0]))}return t}var s={},a={app:0},i=[];function o(e){if(s[e])return s[e].exports;var n=s[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=t,o.c=s,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)o.d(n,s,function(e){return t[e]}.bind(null,s));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],l=r.push.bind(r);r.push=e,r=r.slice();for(var c=0;c<r.length;c++)e(r[c]);var u=l;i.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"01c1":function(t,e){var n={bit32:{prime:0x01000193n,offset:0x811C9DC5n,max:0x100000000n},bit64:{prime:0x00000100000001B3n,offset:0xCBF29CE484222325n,max:0x10000000000000000n}};function s(t,e){for(var n=e.offset,s=e.prime,a=e.max,i=n,o=t.toLowerCase(),r=0;r<t.length;r++)i*=s,i%=a,i^=BigInt(o.charCodeAt(r));return i}t.exports={fnv32:function(t){return s(t,n.bit32)},fnv64:function(t){return s(t,n.bit64)}}},"0a4e":function(t,e,n){},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var s=n("2b0e"),a=n("5f5b"),i=n("4ae6"),o=n.n(i),r=n("8c4f"),l=(n("f9e3"),n("2dd8"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("b-navbar",{staticClass:"py-3 px-4",attrs:{toggleable:"md",sticky:""}},[n("b-navbar-brand",{attrs:{to:"/"}},[t._v("Legacy STBL Tools")]),n("div",{staticClass:"ml-md-2",attrs:{id:"theme-switcher"},on:{click:t.changeTheme}},[t.isDarkTheme?n("b-icon-moon"):n("b-icon-sun")],1)],1),n("router-view")],1)}),c=[],u=n("7386"),h={name:"App",components:{BIconSun:u["A"],BIconMoon:u["s"]},data:function(){return{isDarkTheme:void 0}},created:function(){this.isDarkTheme="true"===localStorage.getItem("fkmods_IsDarkTheme"),document.documentElement.setAttribute("data-theme",this.isDarkTheme?"dark":"light")},methods:{changeTheme:function(){this.isDarkTheme=!this.isDarkTheme,document.documentElement.setAttribute("data-theme",this.isDarkTheme?"dark":"light"),localStorage.setItem("fkmods_IsDarkTheme",this.isDarkTheme)}}},d=h,b=(n("5c0b"),n("2877")),f=Object(b["a"])(d,l,c,!1,null,null,null),p=f.exports,m=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{attrs:{id:"page-not-found"}},[n("b-container",{attrs:{fluid:""}},[n("h1",[t._v("this page does not exist")]),n("p",[t._v("The URL you entered may have changed or been deleted. Try checking the "),n("router-link",{attrs:{to:"/"}},[t._v("home page")]),t._v(". ")],1)])],1)},g=[],v={name:"PageNotFound"},y=v,C=(n("b579"),Object(b["a"])(y,m,g,!1,null,null,null)),S=C.exports,w=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-container",{staticClass:"px-2 px-sm-3 px-md-5 py-5",attrs:{id:"stbl-editor-container",fluid:""}},[n("div",{staticClass:"mb-5"},[n("div",{staticClass:"mb-5"},[n("h1",{staticClass:"mb-3"},[t._v("String Table Editor")]),n("p",[t._v("This experimental tool provides an interface for creating and editing string tables. Strings you create will automatically be hashed (be sure to set your hash prefix in "),n("b-icon-gear"),t._v(" settings to help your hashes be unique!), and the table will be autosaved after every edit so you can leave the site without losing any progress. Please note that this editor does "),n("strong",[t._v("not")]),t._v(" modify the files that you upload, but rather allows you to download a copy. ")],1),n("p",{staticClass:"text-danger font-weight-bold"},[t._v("This tool is now outdated. Please migrate to "),n("a",{attrs:{href:"https://stbl.sims4toolkit.com",target:"_blank"}},[t._v("String Table Studio")]),t._v(", a new and improved STBL editor and manager.")])]),n("div",{staticClass:"mb-5 p-4",attrs:{id:"how-to-use-section"}},[n("b-row",[n("b-col",{staticClass:"text-left"},[n("section-header",{attrs:{text:"how to use"}})],1),n("b-col",{staticClass:"text-right"},[n("b-button",{staticClass:"show-button",attrs:{size:"sm",pressed:t.showInstructions,variant:"outline-primary"},on:{"update:pressed":function(e){t.showInstructions=e}}},[t._v(" "+t._s(t.showInstructionsButtonText)+" ")])],1)],1),t.showInstructions?n("div",{staticClass:"mt-4"},[n("p",[n("strong",[t._v("Step 1:")]),t._v(" Upload an existing "),n("code",[t._v(".StringTable")]),t._v("/"),n("code",[t._v(".binary")]),t._v("/"),n("code",[t._v(".stbl")]),t._v(' file, or create a fresh one with the "New String Table" button. This will bring up the editor. ')]),n("p",[n("strong",[t._v("Step 2:")]),t._v(" Modify and interact with your string table.")]),n("ul",[n("li",{staticClass:"mb-2"},[n("strong",[t._v("Adding.")]),t._v(" Either use the "),n("b-icon-plus-circle"),t._v(" button in the bottom-right corner of the screen or press "),n("kbd",[t._v("WIN/CTRL")]),t._v(" + "),n("kbd",[t._v("N")]),t._v(" to add a string (Windows use "),n("kbd",[t._v("WIN")]),t._v(", macOS use "),n("kbd",[t._v("CTRL")]),t._v("). You will be prompted for a string, and it will automatically be hashed and put in the table when you submit it. ")],1),n("li",{staticClass:"mb-2"},[n("strong",[t._v("Editing.")]),t._v(" Simply click on the string you would like to edit, and start typing. Editing a string will "),n("strong",[t._v("not")]),t._v(" rehash its key, but if you would like to generate a new hash, you can hover over "),n("b-icon-three-dots"),t._v(" and click the "),n("b-icon-arrow-repeat"),t._v(" icon. To manually set the key, click the "),n("b-icon-key"),t._v(" icon. ")],1),n("li",{staticClass:"mb-2"},[n("strong",[t._v("Deleting.")]),t._v(" Hover over "),n("b-icon-three-dots"),t._v(" and click the "),n("b-icon-trash-fill",{attrs:{variant:"danger"}}),t._v(" button. You will then be asked for confirmation, because this action cannot be undone. ")],1),n("li",{staticClass:"mb-2"},[n("strong",[t._v("Copying.")]),t._v(" To copy the key ("),n("code",[t._v("0x00000000")]),t._v("), click the "),n("b-icon-clipboard"),t._v(" button. To copy both the key and string ("),n("code",[t._v("0x00000000\x3c!--String--\x3e")]),t._v("), use "),n("b-icon-clipboard-plus"),t._v(" instead. ")],1)]),n("p",[n("strong",[t._v("Step 3:")]),t._v(" Download your modified string table with the "),n("b-icon-download"),t._v(" button in the bottom-right corner of the screen. ")],1),n("hr"),n("p",[n("strong",[t._v("Bonus info:")]),t._v(" You can export your string table as a JSON file by changing the 'Export As...' setting. You can then do whatever you want with it, and re-upload it here to convert it back to a string table binary. The JSON must be formatted as a list of objects containing "),n("code",[t._v("key")]),t._v(" and "),n("code",[t._v("string")]),t._v(" fields, which should be a 32-bit integer and string, respectively. ")])]):t._e()],1)]),n("b-row",{staticClass:"text-center mb-5",attrs:{id:"upload-area"}},[n("b-col",{staticClass:"my-2",attrs:{cols:"12",md:"6"}},[n("b-form-file",{staticClass:"text-left",attrs:{state:Boolean(t.stblFile),placeholder:"Choose or drop a String Table file here...","drop-placeholder":"Drop file here...",accept:".binary, .stbl, .StringTable, .json"},on:{input:function(e){return t.refreshStbl()}},model:{value:t.stblFile,callback:function(e){t.stblFile=e},expression:"stblFile"}})],1),n("b-col",{staticClass:"text-center text-md-right my-2",attrs:{cols:"12",md:"6"}},[n("b-button",{staticClass:"gradient-button",attrs:{id:"new-stbl-btn",pill:""},on:{click:function(e){return t.newStbl()}}},[t._v(" New String Table ")])],1)],1),Boolean(t.errorMessage)?n("b-alert",{staticClass:"py-3",attrs:{variant:"danger",show:"",dismissible:""}},[n("h2",{staticClass:"alert-heading mb-3"},[t._v("Oops, something doesn't look right")]),n("p",[t._v("Are you sure you uploaded a valid string table binary? If you did, please send me the file you uploaded and tell me what the below error message says.")]),n("pre",{staticClass:"mb-0"},[t._v(t._s(t.errorMessage))])]):t._e(),Array.isArray(t.fileContents)?n("b-row",{attrs:{id:"stbl-content"}},[n("div",{attrs:{id:"utility-buttons-container"}},[n("b-button-toolbar",{staticClass:"text-right float-right floating-card"},[n("b-button-group",[n("a",{staticClass:"btn btn-primary",attrs:{href:t.downloadUrl,download:t.downloadFilename,title:"Download string table"},on:{click:function(e){return t.downloadStbl()}}},[n("b-icon-download")],1),n("button",{staticClass:"btn btn-primary",attrs:{title:"New string"},on:{click:function(e){return t.newString()}}},[n("b-icon-plus-circle")],1)])],1),n("b-button-toolbar",{staticClass:"text-right float-right floating-card mr-3"},[n("b-button-group",[n("button",{staticClass:"btn btn-primary",attrs:{title:"Clear search",disabled:null===t.searchTerm&&null===t.searchByIDTerm},on:{click:function(e){return t.clearSearch()}}},[n("b-icon-x-circle")],1),n("button",{staticClass:"btn btn-primary",attrs:{title:"Search by ID"},on:{click:function(e){return t.searchByIdButtonClicked()}}},[n("b-icon-key")],1),n("button",{staticClass:"btn btn-primary",attrs:{title:"Search by String"},on:{click:function(e){return t.searchButtonClicked()}}},[n("b-icon-search")],1)])],1),n("b-button-toolbar",{staticClass:"text-right float-right floating-card mr-3"},[n("b-button-group",[n("button",{directives:[{name:"b-modal",rawName:"v-b-modal.settings-modal",modifiers:{"settings-modal":!0}}],staticClass:"btn btn-primary",attrs:{title:"Settings"}},[n("b-icon-gear")],1),n("b-modal",{attrs:{id:"settings-modal",title:"Settings","hide-footer":""}},[n("b-container",{attrs:{fluid:""}},[n("b-row",{staticClass:"my-3",attrs:{"align-v":"center"}},[n("b-col",[n("label",{staticClass:"mb-0"},[t._v("Autosave & recovery")])]),n("b-col",[n("b-form-checkbox",{attrs:{switch:""},on:{change:t.cacheSettingChanged},model:{value:t.shouldCacheFileContents,callback:function(e){t.shouldCacheFileContents=e},expression:"shouldCacheFileContents"}})],1)],1),n("b-row",{staticClass:"my-3",attrs:{"align-v":"center"}},[n("b-col",[n("label",{staticClass:"mb-0"},[t._v("Prompt until cancel")])]),n("b-col",[n("b-form-checkbox",{attrs:{switch:""},model:{value:t.chainMode,callback:function(e){t.chainMode=e},expression:"chainMode"}})],1)],1),n("b-row",{staticClass:"my-3",attrs:{"align-v":"center"}},[n("b-col",{attrs:{cols:"12"}},[n("hr"),n("h4",{staticClass:"mb-3"},[t._v("Hashing")])]),n("b-col",{attrs:{cols:"6"}},[n("label",{staticClass:"mb-0"},[t._v("Auto-hash filenames")])]),n("b-col",{attrs:{cols:"6"}},[n("b-form-checkbox",{attrs:{switch:""},model:{value:t.autoHashFilenames,callback:function(e){t.autoHashFilenames=e},expression:"autoHashFilenames"}})],1)],1),n("b-row",{staticClass:"my-3",attrs:{"align-v":"center"}},[n("b-col",{attrs:{cols:"6"}},[n("label",{staticClass:"mb-0"},[t._v("Hash prefix")])]),n("b-col",{attrs:{cols:"6"}},[n("b-form-input",{attrs:{placeholder:"YourName_YourModName",size:"sm"},model:{value:t.hashPrefix,callback:function(e){t.hashPrefix=e},expression:"hashPrefix"}})],1),n("b-col",{attrs:{cols:"12"}},[n("p",{staticClass:"mt-2",staticStyle:{"font-size":"0.8em"}},[t._v("Using a prefix helps make your hashes unique.")])])],1),n("b-row",{staticClass:"my-3",attrs:{"align-v":"center"}},[n("b-col",{attrs:{cols:"12"}},[n("hr"),n("h4",{staticClass:"mb-3"},[t._v("Display")])]),n("b-col",[n("label",{staticClass:"mb-0"},[t._v("Show all strings")])]),n("b-col",[n("b-form-checkbox",{attrs:{switch:""},model:{value:t.showAllStrings,callback:function(e){t.showAllStrings=e},expression:"showAllStrings"}}),t.showAllStrings?n("div",{staticClass:"text-danger"},[n("p",[t._v("This may impact performance")])]):t._e()],1)],1),n("b-row",{staticClass:"my-3",attrs:{"align-v":"center"}},[n("b-col",[n("label",{staticClass:"mb-0"},[t._v("Strings per page")])]),n("b-col",[n("b-form-input",{attrs:{id:"chunk-size-input",type:"number",min:"1",step:"1",onkeypress:"return (event.charCode == 8 || event.charCode == 0) ? null : event.charCode >= 48 && event.charCode <= 57",state:t.entryChunkSize>=1,disabled:t.showAllStrings,placeholder:"Enter an integer",size:"sm"},model:{value:t.entryChunkSize,callback:function(e){t.entryChunkSize=e},expression:"entryChunkSize"}}),!t.showAllStrings&&t.entryChunkSize>100?n("div",{staticClass:"text-danger"},[n("p",[t._v("This may impact performance")])]):t._e()],1)],1),n("b-row",{staticClass:"my-3",attrs:{"align-v":"center"}},[n("b-col",[n("label",{staticClass:"mb-0"},[t._v("Show previous text")])]),n("b-col",[n("b-form-checkbox",{attrs:{switch:""},model:{value:t.showPreviousTextTooltip,callback:function(e){t.showPreviousTextTooltip=e},expression:"showPreviousTextTooltip"}})],1)],1),n("b-row",{staticClass:"my-3",attrs:{"align-v":"center"}},[n("b-col",[n("label",{staticClass:"mb-0"},[t._v("Page layout")])]),n("b-col",[n("b-form-radio-group",{attrs:{options:t.layoutTypes},model:{value:t.chosenLayoutType,callback:function(e){t.chosenLayoutType=e},expression:"chosenLayoutType"}})],1)],1),n("b-row",{staticClass:"my-3",attrs:{"align-v":"center"}},[n("b-col",{attrs:{cols:"12"}},[n("hr"),n("h4",{staticClass:"mb-3"},[t._v("Exporting")])]),n("b-col",[n("label",{staticClass:"mb-0"},[t._v("Naming convention")])]),n("b-col",[n("b-form-radio-group",{attrs:{options:t.filenameTypeOptions},model:{value:t.filenameType,callback:function(e){t.filenameType=e},expression:"filenameType"}})],1),n("b-col",{attrs:{cols:"12"}},[n("p",{staticClass:"mt-2",staticStyle:{"font-size":"0.8em"}},[t._v("If translating my mods, use S4S.")])])],1),n("b-row",{staticClass:"my-3",attrs:{"align-v":"center"}},[n("b-col",[n("label",{staticClass:"mb-0"},[t._v("Export as")])]),n("b-col",[n("b-form-radio-group",{attrs:{options:t.downloadOptions},model:{value:t.downloadOption,callback:function(e){t.downloadOption=e},expression:"downloadOption"}})],1),n("b-col",{attrs:{cols:"12"}},[n("p",{staticClass:"mt-2",staticStyle:{"font-size":"0.8em"}},[t._v('If you don\'t know what this means, just use "Binary".')])])],1)],1)],1)],1)],1)],1),t.entriesToShow.length<t.numEntries?n("div",{attrs:{id:"pagination-container"}},[n("b-pagination",{attrs:{"total-rows":t.numEntries,"per-page":t.entryChunkSize,"first-number":"","last-number":"",pills:""},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}})],1):t._e(),t.autosaveDisabled&&t.shouldCacheFileContents?n("div",{staticClass:"px-3 py-1 alert-danger",attrs:{id:"autosave-disabled-warning"}},[n("p",[t._v("Autosave Disabled!")])]):t._e(),n("b-col",{attrs:{cols:"12"}},[n("hr",{staticClass:"mb-5",attrs:{id:"content-divider"}})]),n("b-col",{staticClass:"my-3",attrs:{cols:"6",md:"3"}},[n("b-form-select",{attrs:{name:"language"},on:{input:t.updateLocaleInInstance},model:{value:t.selectedLanguage,callback:function(e){t.selectedLanguage=e},expression:"selectedLanguage"}},t._l(t.languages,(function(e){return n("option",{key:e.name,domProps:{value:e}},[t._v(" "+t._s(e.emoji)+" "+t._s(e.name)+" ("+t._s(e.nativeName)+") ")])})),0)],1),n("b-col",{staticClass:"my-3",attrs:{cols:"6",md:"3"}},[n("b-form-input",{attrs:{placeholder:"Type",state:t.typeIsValid,disabled:t.typeIsValid,autocomplete:"off"},model:{value:t.fileTGI.t,callback:function(e){t.$set(t.fileTGI,"t",e)},expression:"fileTGI.t"}}),n("b-form-invalid-feedback",[t._v(' Type should be "220557DA" ')])],1),n("b-col",{staticClass:"my-3",attrs:{cols:"6",md:"3"}},[n("b-form-input",{attrs:{placeholder:"Group",state:t.groupIsValid,autocomplete:"off"},model:{value:t.fileTGI.g,callback:function(e){t.$set(t.fileTGI,"g",e)},expression:"fileTGI.g"}}),n("b-form-invalid-feedback",[t._v(" Group must be a 32-bit hex code ")])],1),n("b-col",{staticClass:"my-3",attrs:{cols:"6",md:"3"}},[n("b-form-input",{attrs:{placeholder:"Instance",state:t.instanceIsValid,autocomplete:"off"},model:{value:t.fileTGI.i,callback:function(e){t.$set(t.fileTGI,"i",e)},expression:"fileTGI.i"}}),n("b-form-invalid-feedback",[t.instanceIs64Bit?t._e():n("p",{staticClass:"mb-0"},[t._v("Instance must be a 64-bit hex code")]),t.instanceMatchesLocale?t._e():n("p",[t._v("First two digits must match locale ("+t._s(t.selectedLanguage.stblCode)+")")])])],1),null===t.fileContents||0===t.fileContents.length?n("b-col",{staticClass:"my-5 text-center",attrs:{cols:"12"}},[n("p",[t._v("This string table is empty. To add a new string, either click the "),n("b-icon-plus-circle"),t._v(" button, press the "),n("kbd",[t._v("WIN/CTRL")]),t._v(" + "),n("kbd",[t._v("N")]),t._v(" keys, or "),n("span",{staticClass:"clickable",on:{click:t.newString}},[t._v("click here")]),t._v(". ")],1)]):0===t.filteredStrings.length&&null!==t.searchTerm?n("b-col",{staticClass:"my-5 text-center",attrs:{cols:"12"}},[n("p",[t._v('No strings in this table contain "'+t._s(t.searchTerm)+'". You can either '),n("span",{staticClass:"clickable",on:{click:t.clearSearch}},[t._v("clear your search term")]),t._v(", or "),n("span",{staticClass:"clickable",on:{click:t.searchButtonClicked}},[t._v("try another one")]),t._v(". ")])]):0===t.filteredStrings.length&&null!==t.searchByIDTerm?n("b-col",{staticClass:"my-5 text-center",attrs:{cols:"12"}},[n("p",[t._v('No strings in this table have the key "'+t._s(t.searchByIDTerm)+'". You can either '),n("span",{staticClass:"clickable",on:{click:t.clearSearch}},[t._v("clear your search term")]),t._v(", or "),n("span",{staticClass:"clickable",on:{click:t.searchByIdButtonClicked}},[t._v("try another one")]),t._v(". ")])]):t._e(),"cards"===this.chosenLayoutType?n("b-row",{staticClass:"w-100 m-0 p-0 text-center"},t._l(t.entriesToShow,(function(e,s){return n("b-col",{key:s,staticClass:"my-3",attrs:{cols:"12",sm:"6",md:"4"}},[n("div",[n("b-card",{staticClass:"floating-card"},[n("div",{staticClass:"d-flex flex-row mb-2"},[n("h3",[t._v(t._s(t.getHexCode(s)))]),n("div",{staticClass:"w-100 text-right",staticStyle:{"font-size":"1.2em"}},[n("b-icon-clipboard",{directives:[{name:"clipboard",rawName:"v-clipboard",value:function(){return t.keyToClipboard(s)},expression:"() => keyToClipboard(n)"}],staticClass:"hover-cursor",attrs:{id:"clipboard-"+s,title:"Copy key to clipboard"}}),n("b-popover",{attrs:{target:"clipboard-"+s,triggers:"click blur",placement:"top"}},[t._v(" Copied! ")]),n("b-icon-clipboard-plus",{directives:[{name:"clipboard",rawName:"v-clipboard",value:function(){return t.keyAndStringToClipboard(s)},expression:"() => keyAndStringToClipboard(n)"}],staticClass:"hover-cursor ml-2",attrs:{id:"clipboard-plus-"+s,title:"Copy key and comment to clipboard"}}),n("b-popover",{attrs:{target:"clipboard-plus-"+s,triggers:"click blur",placement:"top"}},[t._v(" Copied! ")]),n("b-icon-three-dots",{staticClass:"ml-2",attrs:{id:"more-actions-"+s}}),n("b-popover",{attrs:{target:"more-actions-"+s,triggers:"hover",placement:"top"}},[n("b-icon-key",{staticClass:"hover-cursor",attrs:{title:"Edit existing key"},on:{click:function(e){return t.setManualKey(s)}}}),n("b-icon-arrow-repeat",{staticClass:"ml-2 hover-cursor",attrs:{title:"Generate new key"},on:{click:function(e){return t.newHash(s)}}}),n("b-icon-trash-fill",{staticClass:"ml-2 hover-cursor",attrs:{variant:"danger",title:"Delete string"},on:{click:function(e){return t.deleteString(s)}}})],1)],1)]),n("b-form-textarea",{attrs:{placeholder:"{0.SimFirstName} is reticulating {M0.his}{F0.her} splines!",id:"string-input-"+s,rows:"3","max-rows":"3","no-resize":"",debounce:"500"},on:{focusin:function(n){return t.onStringInputFocused(e)},focusout:t.onStringInputUnfocused},model:{value:e.string,callback:function(n){t.$set(e,"string",n)},expression:"stringEntry.string"}}),t.showStringEntryTooltip(e)?n("b-popover",{attrs:{target:"string-input-"+s,title:"Previous Text",content:t.selectedEntryPreviousState.string,placement:"top"}}):t._e()],1)],1)])})),1):n("b-row",{staticClass:"w-100 mx-0 mb-0 mt-3 p-0 text-center"},t._l(t.entriesToShow,(function(e,s){return n("b-col",{key:s,staticClass:"listview-column",attrs:{cols:"12"}},[n("b-card",{class:s%2===0?"listview-card":"listview-card listview-card-dark"},[n("b-row",{attrs:{"align-v":"center"}},[n("b-col",{staticClass:"px-md-1 mb-2 mb-md-0 text-left text-md-center text-nowrap",attrs:{cols:"12",md:"2",xl:"1"}},[n("h4",{staticClass:"my-auto"},[t._v(t._s(t.getHexCode(s)))])]),n("b-col",{attrs:{cols:"12",md:"8",xl:"10"}},[n("b-form-input",{attrs:{id:"string-input-"+s,placeholder:"{0.SimFirstName} is reticulating {M0.his}{F0.her} splines!",debounce:"500",autocomplete:"off"},on:{focusin:function(n){return t.onStringInputFocused(e)},focusout:t.onStringInputUnfocused},model:{value:e.string,callback:function(n){t.$set(e,"string",n)},expression:"stringEntry.string"}}),t.showStringEntryTooltip(e)?n("b-popover",{attrs:{target:"string-input-"+s,title:"Previous Text",content:t.selectedEntryPreviousState.string,placement:"top"}}):t._e()],1),n("b-col",{staticClass:"px-md-1 mt-2 mt-md-0",attrs:{cols:"12",md:"2",xl:"1"}},[n("div",{staticClass:"text-left text-md-center text-nowrap",staticStyle:{"font-size":"1.2em"}},[n("b-icon-clipboard",{directives:[{name:"clipboard",rawName:"v-clipboard",value:function(){return t.keyToClipboard(s)},expression:"() => keyToClipboard(n)"}],staticClass:"hover-cursor",attrs:{id:"clipboard-"+s,title:"Copy key to clipboard"}}),n("b-popover",{attrs:{target:"clipboard-"+s,triggers:"click blur",placement:"top"}},[t._v(" Copied! ")]),n("b-icon-clipboard-plus",{directives:[{name:"clipboard",rawName:"v-clipboard",value:function(){return t.keyAndStringToClipboard(s)},expression:"() => keyAndStringToClipboard(n)"}],staticClass:"hover-cursor ml-2",attrs:{id:"clipboard-plus-"+s,title:"Copy key and comment to clipboard"}}),n("b-popover",{attrs:{target:"clipboard-plus-"+s,triggers:"click blur",placement:"top"}},[t._v(" Copied! ")]),n("b-icon-three-dots",{staticClass:"ml-2",attrs:{id:"more-actions-"+s}}),n("b-popover",{attrs:{target:"more-actions-"+s,triggers:"hover",placement:"top"}},[n("b-icon-key",{staticClass:"hover-cursor",attrs:{title:"Edit existing key"},on:{click:function(e){return t.setManualKey(s)}}}),n("b-icon-arrow-repeat",{staticClass:"ml-2 hover-cursor",attrs:{title:"Generate new key"},on:{click:function(e){return t.newHash(s)}}}),n("b-icon-trash-fill",{staticClass:"ml-2 hover-cursor",attrs:{variant:"danger",title:"Delete string"},on:{click:function(e){return t.deleteString(s)}}})],1)],1)])],1)],1)],1)})),1),t.entriesToShow.length<t.numEntries?n("b-col",{staticClass:"text-center mt-4",attrs:{cols:"12"}},[t._v(" Page "+t._s(t.currentPage)+" of "+t._s(t.totalPages)+" ")]):t._e()],1):t._e()],1)},_=[],k=(n("99af"),n("4de4"),n("7db0"),n("c740"),n("4160"),n("caad"),n("d81d"),n("fb6a"),n("a434"),n("b0c0"),n("a9e3"),n("d3b7"),n("ac1f"),n("25f0"),n("2532"),n("466d"),n("4d90"),n("1276"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"section-header text-left"},[n("h2",{staticClass:"mb-1"},[t._v(t._s(t.text)),void 0!==t.badge?n("b-badge",{staticClass:"ml-2"},[t._v(t._s(t.badge))]):t._e()],1),n("hr",{staticClass:"m-0"})])}),T=[],I={name:"SectionHeader",props:{text:String,badge:String}},x=I,F=(n("ccaf"),Object(b["a"])(x,k,T,!1,null,null,null)),L=F.exports,G=n("d59c"),D=n("9558"),E={name:"English",nativeName:"English",emoji:"ðŸ‡ºðŸ‡¸",stblCode:"00"},B=[{name:"Chinese, Simplified",nativeName:"ç®€ä½“ä¸­æ–‡",emoji:"ðŸ‡¨ðŸ‡³",stblCode:"01"},{name:"Chinese, Traditional",nativeName:"ç¹é«”ä¸­æ–‡",emoji:"ðŸ‡¨ðŸ‡³",stblCode:"02"},{name:"Czech",nativeName:"ÄŒeÅ¡tina",emoji:"ðŸ‡¨ðŸ‡¿",stblCode:"03"},{name:"Danish",nativeName:"Dansk",emoji:"ðŸ‡©ðŸ‡°",stblCode:"04"},{name:"Dutch",nativeName:"Nederlands",emoji:"ðŸ‡³ðŸ‡±",stblCode:"05"},E,{name:"Finnish",nativeName:"Suomi",emoji:"ðŸ‡«ðŸ‡®",stblCode:"06"},{name:"French",nativeName:"FranÃ§ais",emoji:"ðŸ‡«ðŸ‡·",stblCode:"07"},{name:"German",nativeName:"Deutsch",emoji:"ðŸ‡©ðŸ‡ª",stblCode:"08"},{name:"Italian",nativeName:"Italiano",emoji:"ðŸ‡®ðŸ‡¹",stblCode:"0B"},{name:"Japanese",nativeName:"æ—¥æœ¬èªž",emoji:"ðŸ‡¯ðŸ‡µ",stblCode:"0C"},{name:"Korean",nativeName:"í•œêµ­ì–´",emoji:"ðŸ‡°ðŸ‡·",stblCode:"0D"},{name:"Norwegian",nativeName:"Norsk",emoji:"ðŸ‡³ðŸ‡´",stblCode:"0E"},{name:"Polish",nativeName:"Polski",emoji:"ðŸ‡µðŸ‡±",stblCode:"0F"},{name:"Portuguese",nativeName:"PortuguÃªs",emoji:"ðŸ‡§ðŸ‡·",stblCode:"11"},{name:"Russian",nativeName:"Ð ÑƒÑÑÐºÐ¸Ð¹",emoji:"ðŸ‡·ðŸ‡º",stblCode:"12"},{name:"Spanish",nativeName:"EspaÃ±ol",emoji:"ðŸ‡ªðŸ‡¸",stblCode:"13"},{name:"Swedish",nativeName:"Svenska",emoji:"ðŸ‡¸ðŸ‡ª",stblCode:"15"}];function P(t){var e=Object(D["a"])(/([0-9A-Fa-f]{8})[!_]?([0-9A-Fa-f]{8})[!_]?([0-9A-Fa-f]{16})/,{t:1,g:2,i:3}).exec(t).groups,n=e.t,s=e.g,a=e.i;return{t:n,g:s,i:a}}function j(t){var e=t.substr(0,2);return B.find((function(t){return t.stblCode===e}))}var N=n("f155"),A=n("01c1");function O(t){return"0x"+t.toString(16).toUpperCase().padStart(8,"0")}var M=[],U={name:"StblEditor",components:{SectionHeader:L,BIconPlusCircle:u["v"],BIconTrashFill:u["C"],BIconClipboard:u["k"],BIconArrowRepeat:u["a"],BIconThreeDots:u["B"],BIconClipboardPlus:u["l"],BIconKey:u["r"],BIconDownload:u["p"],BIconGear:u["q"],BIconSearch:u["w"],BIconXCircle:u["E"]},created:function(){M.length>0&&(M.forEach((function(t){document.removeEventListener("keydown",t)})),M.length=0),document.addEventListener("keydown",this.handleKeydown),M.push(this.handleKeydown),this.autoHashFilenames="true"===localStorage.getItem("fkStblTool_AutoHashFiles"),this.showAllStrings="true"===localStorage.getItem("fkStblTool_ShowAllStrings"),this.entryChunkSize=localStorage.getItem("fkStblTool_ChunkSize")||24,this.filenameType=localStorage.getItem("fkStblTool_OutputFormat")||"s4s",this.chosenLayoutType=localStorage.getItem("fkStblTool_LayoutType")||"cards";var t=localStorage.getItem("fkStblTool_PrevTextTooltip");this.showPreviousTextTooltip=null===t||"true"===t;var e=localStorage.getItem("fkStblTool_CacheFileContents");this.shouldCacheFileContents=null===e||"true"===e,this.hashPrefix=localStorage.getItem("fkStblTool_HashPrefix"),this.downloadOption=localStorage.getItem("fkStblTool_DownloadAs")||"binary",this.chainMode="true"===localStorage.getItem("fkStblTool_ChainMode");var n=localStorage.getItem("fkStblTool_FileContents");if(null!==n){this.fileContents=JSON.parse(n);var s=localStorage.getItem("fkStblTool_FileTGI");this.fileTGI=JSON.parse(s);var a=localStorage.getItem("fkStblTool_FileLanguageName"),i=this.languages.find((function(t){var e=t.name;return e===a}));this.selectedLanguage=i||E}},mounted:function(){var t=this;this.$root.$on("bv::modal::hide",(function(e,n){"settings-modal"===n&&t.saveSettings()}))},data:function(){return{stblFile:null,fileContents:null,errorMessage:null,languages:B,selectedLanguage:E,fileTGI:null,downloadUrl:"",entryChunkSize:24,currentPage:1,showAllStrings:!1,autoHashFilenames:!1,filenameType:"s4s",filenameTypeOptions:[{text:"S4S",value:"s4s"},{text:"S4PE",value:"s4pe"}],downloadOption:"binary",downloadOptions:[{text:"Binary",value:"binary"},{text:"JSON",value:"json"}],chosenLayoutType:"cards",layoutTypes:[{text:"Cards",value:"cards"},{text:"List",value:"list"}],showPreviousTextTooltip:!0,searchTerm:null,searchByIDTerm:null,cachedFilteredStrings:null,selectedEntryPreviousState:null,shouldCacheFileContents:!0,autosaveDisabled:!1,hashPrefix:null,showInstructions:!1,chainMode:!1}},watch:{shouldCacheFileContents:function(t){t||this.clearFileCache()},totalEntries:function(){this.tryCacheFileContents()},tgilValues:function(){this.tryCacheFileContents()}},computed:{showInstructionsButtonText:function(){return this.showInstructions?"hide":"show"},downloadFilename:function(){if("s4s"===this.filenameType){var t="".concat(this.fileTGI.t,"!").concat(this.fileTGI.g,"!").concat(this.fileTGI.i),e="json"===this.downloadOption?"json":"binary";return"".concat(t,".").concat(this.selectedLanguage.name,".StringTable.").concat(e)}var n="".concat(this.fileTGI.t,"_").concat(this.fileTGI.g,"_").concat(this.fileTGI.i),s="json"===this.downloadOption?"json":"stbl";return"S4_".concat(n,".").concat(s)},entriesToShow:function(){if(this.showAllStrings)return this.filteredStrings;var t=Math.min(this.numEntries,this.currentPage*this.entryChunkSize),e=(this.currentPage-1)*this.entryChunkSize;return this.filteredStrings.slice(e,t)},filteredStrings:function(){var t=this;return null!==this.searchTerm?null!==this.cachedFilteredStrings?this.cachedFilteredStrings:this.fileContents.filter((function(e){return t.stringKeyBeingEdited===e.key||e.string.toLowerCase().includes(t.searchTerm)})):null!==this.searchByIDTerm?null!==this.cachedFilteredStrings?this.cachedFilteredStrings:this.fileContents.filter((function(e){return O(e.key).toLowerCase().includes(t.searchByIDTerm)})):this.fileContents},numEntries:function(){return this.filteredStrings.length},totalEntries:function(){return null===this.fileContents?0:this.fileContents.length},typeIsValid:function(){return"220557DA"===this.fileTGI.t},groupIsValid:function(){return/^([0-9A-F]{8})$/i.test(this.fileTGI.g)},instanceIsValid:function(){return this.instanceIs64Bit&&this.instanceMatchesLocale},instanceIs64Bit:function(){return/^([0-9A-F]{16})$/i.test(this.fileTGI.i)},instanceMatchesLocale:function(){return null!==this.fileTGI.i&&this.selectedLanguage.stblCode===this.fileTGI.i.substr(0,2)},totalPages:function(){return Math.ceil(this.numEntries/this.entryChunkSize)},tgilValues:function(){var t=Object.assign({},this.fileTGI);return{locale:this.selectedLanguage,tgi:t}}},methods:{saveSettings:function(){localStorage.setItem("fkStblTool_AutoHashFiles",this.autoHashFilenames),localStorage.setItem("fkStblTool_ShowAllStrings",this.showAllStrings),localStorage.setItem("fkStblTool_ChunkSize",this.entryChunkSize),localStorage.setItem("fkStblTool_OutputFormat",this.filenameType),localStorage.setItem("fkStblTool_LayoutType",this.chosenLayoutType),localStorage.setItem("fkStblTool_PrevTextTooltip",this.showPreviousTextTooltip),localStorage.setItem("fkStblTool_CacheFileContents",this.shouldCacheFileContents),localStorage.setItem("fkStblTool_HashPrefix",this.hashPrefix),localStorage.setItem("fkStblTool_DownloadAs",this.downloadOption),localStorage.setItem("fkStblTool_ChainMode",this.chainMode)},tryCacheFileContents:function(){if(this.shouldCacheFileContents){if(null===this.fileContents)return;this.fileContents.length>1e4?this.autosaveDisabled||(alert("Autosave is disabled for this string table.\n\nFor performance and storage reasons, autosave is only available for string tables with 10,000 or fewer entries. To continue using autosave, please export this string table and start working on a new one. You can merge your string tables together later (I have a tool for that as well!)."),this.autosaveDisabled=!0):(localStorage.setItem("fkStblTool_FileContents",JSON.stringify(this.fileContents)),localStorage.setItem("fkStblTool_FileTGI",JSON.stringify(this.fileTGI)),localStorage.setItem("fkStblTool_FileLanguageName",this.selectedLanguage.name),this.autosaveDisabled=!1)}else this.autosaveDisabled=!1},cacheSettingChanged:function(){this.shouldCacheFileContents||this.clearFileCache()},clearFileCache:function(){localStorage.removeItem("fkStblTool_FileContents"),localStorage.removeItem("fkStblTool_FileTGI"),localStorage.removeItem("fkStblTool_FileLanguageName")},handleKeydown:function(t){var e=(t.ctrlKey||t.metaKey)&&"n"===t.key;e&&Array.isArray(this.fileContents)&&this.newString()},updateLocaleInInstance:function(){this.fileTGI.i=this.selectedLanguage.stblCode+this.fileTGI.i.substring(2)},newStbl:function(){(null===this.fileContents||confirm("Are you sure you want to overwrite the string table you currently have open? Its contents cannot be recovered once you do this."))&&(this.stblFile=null,this.errorMessage=null,this.fileContents=[],this.setDefaultTGI())},getHexCode:function(t){return O(this.entriesToShow[t].key)},setDefaultTGI:function(){if(this.fileTGI={t:"220557DA",g:"80000000",i:null},this.autoHashFilenames&&this.stblFile){var t=Object(A["fnv64"])(this.stblFile.name).toString(16).toUpperCase().padStart(16,"0");this.fileTGI.i=this.selectedLanguage.stblCode+t.substring(2)}else{var e=this.stblFile?this.stblFile.name:"",n=prompt("Enter a name to hash for the instance ID of your string table. It should be a unique name, prefixed with your creator name, such as 'YourName:stringTable_UniqueDescription'.",e);if(n){var s=Object(A["fnv64"])(n).toString(16).toUpperCase().padStart(16,"0");this.fileTGI.i=this.selectedLanguage.stblCode+s.substring(2)}else this.fileTGI.i="Unknown"}},setLanguageAndTGIFromFilename:function(){try{this.fileTGI=P(this.stblFile.name),this.selectedLanguage=j(this.fileTGI.i)}catch(t){this.autoHashFilenames||alert("I could read the contents of your file, but not its type, group, instance, or locale code. In order for me to read these values, your filename must follow either the S4S or S4PE naming conventions.\n\nYou will be prompted to enter a name to hash for the instance ID of this string table."),this.setDefaultTGI()}},refreshStbl:function(){var t=this;if(null!==this.stblFile)try{var e=this.stblFile.name.split("."),n="json"===e[e.length-1];n?Object(G["b"])(this.stblFile).then((function(e){if(null===e||"string"===typeof e)t.fileContents=null,t.errorMessage=e;else{if(t.errorMessage=null,!Array.isArray(e))throw"JSON is not an array.";t.fileContents=e.map((function(t){var e=t.key,n=t.string;if(void 0===e||void 0===n)throw"At least one entry is missing a key and/or string value.";if("number"!==typeof e)throw"At least one key is not a number.";if("string"!==typeof n)throw"At least one string value is not a string.";return{key:e,string:n}})),t.setLanguageAndTGIFromFilename()}})).catch((function(e){t.fileContents=null,t.errorMessage=e})):Object(G["a"])(this.stblFile).then((function(e){null===e||"string"===typeof e?(t.fileContents=null,t.errorMessage=e):(t.errorMessage=null,t.fileContents=e.stringEntries.map((function(t){return{key:t.key,string:t.string}})),t.setLanguageAndTGIFromFilename())}))}catch(s){this.fileContents=null,this.errorMessage=s}},onStringInputFocused:function(t){null===this.selectedEntryPreviousState&&(this.selectedEntryPreviousState={key:t.key,string:t.string}),null===this.searchTerm&&null===this.searchByIDTerm||(this.cachedFilteredStrings=this.filteredStrings)},onStringInputUnfocused:function(){this.tryCacheFileContents(),this.selectedEntryPreviousState=null,null===this.searchTerm&&null===this.searchByIDTerm||(this.cachedFilteredStrings=null)},showStringEntryTooltip:function(t){return!!this.showPreviousTextTooltip&&(null!==this.selectedEntryPreviousState&&t.key===this.selectedEntryPreviousState.key)},deleteString:function(t){var e=t+(this.currentPage-1)*this.entryChunkSize,n=this.filteredStrings[e].key;if(confirm("Are you sure you want to delete string ".concat(O(n),"? This action cannot be undone.")))if(this.fileContents.length===this.filteredStrings.length)this.fileContents.splice(e,1);else{var s=this.fileContents.findIndex((function(t){var e=t.key;return e===n}));this.fileContents.splice(s,1)}},newString:function(){if(this.hashPrefix){var t=prompt("Enter a string.");if(t){var e=this.hashPrefix?"".concat(this.hashPrefix,":").concat(t):t,n=Number(Object(A["fnv32"])(e));this.fileContents.push({key:n,string:t}),this.chainMode&&this.newString()}}else alert("As mentioned in the directions, you must set a hash prefix in settings before creating strings. This should be something unique to you, such as your creator name. It will be appended to strings before they are hashed to help keep your hashes unique.")},searchButtonClicked:function(){var t=prompt("Only show strings containing...",this.searchTerm||"");null!==t&&(this.searchTerm=t?t.toLowerCase():null,this.searchByIDTerm=null),this.cachedFilteredStrings=null},searchByIdButtonClicked:function(){var t=prompt("Find string by ID...",this.searchByIDTerm||"");null!==t&&(this.searchByIDTerm=t?t.toLowerCase():null,this.searchTerm=null),this.cachedFilteredStrings=null},clearSearch:function(){this.searchTerm=null,this.searchByIDTerm=null,this.cachedFilteredStrings=null},newHash:function(t){var e=this.entriesToShow[t];if(e.string){var n=this.hashPrefix?"".concat(this.hashPrefix,":").concat(e.string):e.string;e.key=Number(Object(A["fnv32"])(n)),this.tryCacheFileContents()}},keyToClipboard:function(t){return O(this.entriesToShow[t].key)},setManualKey:function(t){var e=prompt("Enter the 32-bit hash to use.",this.getHexCode(t));e&&e.match(/^(0x)?([0-9A-F]{8})$/i)?(this.entriesToShow[t].key=parseInt(e,16),this.tryCacheFileContents()):null!==e&&alert("".concat(e," is not a valid key. It must be a 32-bit (8 digit) hex code."))},keyAndStringToClipboard:function(t){var e=this.entriesToShow[t];return O(e.key)+"\x3c!--"+e.string+"--\x3e"},downloadStbl:function(){var t,e,n=this.typeIsValid&&this.groupIsValid&&this.instanceIsValid&&this.instanceMatchesLocale;n||alert("Your string table either does not have a valid type, group, or instance, or its instance does not match the locale you have selected. You may experience issues when importing your string table to S4S."),"binary"===this.downloadOption?(t="base64",e=Object(N["a"])(this.fileContents).toString(t)):(t="utf-8",e=JSON.stringify(this.fileContents,null,2)),this.downloadUrl="data:text/plain;".concat(t,",").concat(e)}}},z=U,H=(n("8e78"),Object(b["a"])(z,w,_,!1,null,null,null)),$=H.exports,V=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-container",{staticClass:"px-2 px-sm-3 px-md-5 py-5",attrs:{id:"stbl-merger-container",fluid:""}},[n("div",{staticClass:"mb-5"},[n("h1",{staticClass:"mb-3"},[t._v("String Table Merger")]),n("p",[t._v("This experimental tool allows you to merge multiple string tables into one. Upload as many "),n("code",[t._v(".StringTable")]),t._v(", "),n("code",[t._v(".binary")]),t._v(", and/or "),n("code",[t._v(".stbl")]),t._v(" files as you want, follow the prompts, and then you will be able to download your merged string table in either S4S or S4PE format. ")]),n("p",{staticClass:"text-danger font-weight-bold"},[t._v("This tool is now outdated. Please migrate to "),n("a",{attrs:{href:"https://stbl.sims4toolkit.com",target:"_blank"}},[t._v("String Table Studio")]),t._v(", a new and improved STBL editor and manager.")])]),n("div",{staticClass:"my-5"},[n("section-header",{staticClass:"mb-4",attrs:{text:"upload your files"}}),n("p",[t._v("Upload the string tables you would like to merge. Only "),n("code",[t._v(".StringTable")]),t._v(", "),n("code",[t._v(".binary")]),t._v(", and "),n("code",[t._v(".stbl")]),t._v(" files are supported.")]),n("b-form-file",{staticClass:"text-left",attrs:{placeholder:"Choose or drop .StringTable, .binary, and .stbl files here...","drop-placeholder":"Drop files here...",accept:".binary, .stbl, .StringTable",multiple:""},on:{input:function(e){return t.filesUploaded()}},model:{value:t.stblFiles,callback:function(e){t.stblFiles=e},expression:"stblFiles"}}),t.allFilesDecoded?n("div",{staticClass:"mt-4 px-3 files-uploaded-area"},[n("b-row",t._l(t.decodedStbls,(function(e,s){return n("b-col",{key:s,staticClass:"p-2",attrs:{cols:"12",md:"6"}},[n("b-card",[n("b-row",{staticClass:"text-center",attrs:{"align-v":"center"}},[n("b-col",{staticClass:"mb-2 mb-sm-0",attrs:{cols:"12",sm:"3"}},[n("h4",{staticClass:"text-nowrap"},[t._v("Language")]),n("p",[t._v(t._s(e.locale.emoji)+" "+t._s(e.locale.name))])]),n("b-col",{staticClass:"mb-2 mb-sm-0",attrs:{cols:"12",sm:"6"}},[n("h4",{staticClass:"text-nowrap"},[t._v("Instance ID")]),n("p",[t._v(t._s(e.tgi.i))])]),n("b-col",{attrs:{cols:"12",sm:"3"}},[n("h4",{staticClass:"text-nowrap"},[t._v("Strings")]),n("p",[t._v(t._s(e.numEntries))])])],1)],1)],1)})),1)],1):t._e()],1),t.allFilesDecoded?n("div",{staticClass:"my-5"},[n("section-header",{staticClass:"mb-4",attrs:{text:"merge your files"}}),n("p",[t._v("Choose the locale, type, group, and instance of your output file. To hash a name for your new string table, "),n("span",{staticClass:"clickable",on:{click:t.hashNewInstance}},[t._v("click here")]),t._v(".")]),n("b-row",[n("b-col",{staticClass:"my-3",attrs:{cols:"6",md:"3"}},[n("b-form-select",{attrs:{name:"language"},on:{input:t.updateLocaleInInstance},model:{value:t.outputLanguage,callback:function(e){t.outputLanguage=e},expression:"outputLanguage"}},t._l(t.languages,(function(e){return n("option",{key:e.name,domProps:{value:e}},[t._v(" "+t._s(e.emoji)+" "+t._s(e.name)+" ("+t._s(e.nativeName)+") ")])})),0)],1),n("b-col",{staticClass:"my-3",attrs:{cols:"6",md:"3"}},[n("b-form-input",{attrs:{placeholder:"Type",state:t.typeIsValid,disabled:t.typeIsValid,autocomplete:"off"},model:{value:t.outputTGI.t,callback:function(e){t.$set(t.outputTGI,"t",e)},expression:"outputTGI.t"}}),n("b-form-invalid-feedback",[t._v(' Type should be "220557DA" ')])],1),n("b-col",{staticClass:"my-3",attrs:{cols:"6",md:"3"}},[n("b-form-input",{attrs:{placeholder:"Group",state:t.groupIsValid,autocomplete:"off"},model:{value:t.outputTGI.g,callback:function(e){t.$set(t.outputTGI,"g",e)},expression:"outputTGI.g"}}),n("b-form-invalid-feedback",[t._v(" Group must be a 32-bit hex code ")])],1),n("b-col",{staticClass:"my-3",attrs:{cols:"6",md:"3"}},[n("b-form-input",{attrs:{placeholder:"Instance",state:t.instanceIsValid,autocomplete:"off"},model:{value:t.outputTGI.i,callback:function(e){t.$set(t.outputTGI,"i",e)},expression:"outputTGI.i"}}),n("b-form-invalid-feedback",[t.instanceIs64Bit?t._e():n("p",{staticClass:"mb-0"},[t._v("Instance must be a 64-bit hex code")]),t.instanceMatchesLocale?t._e():n("p",[t._v("First two digits must match locale ("+t._s(t.outputLanguage.stblCode)+")")])])],1)],1),n("b-row",{staticClass:"text-center mt-5",attrs:{"align-v":"center"}},[n("b-col",[n("b-button",{staticClass:"gradient-button",attrs:{href:t.downloadUrl,download:t.downloadFilename,title:"Download string table",size:"lg",pill:""},on:{click:function(e){return t.download("s4s")}}},[n("b-icon-download",{staticClass:"mr-2"}),t._v(" Download for S4S ")],1)],1),n("b-col",[n("b-button",{staticClass:"gradient-button",attrs:{href:t.downloadUrl,download:t.downloadFilename,title:"Download string table",size:"lg",pill:""},on:{click:function(e){return t.download("s4pe")}}},[n("b-icon-download",{staticClass:"mr-2"}),t._v(" Download for S4PE ")],1)],1)],1)],1):t._e()])},Y=[],J=(n("159b"),{name:"StblMerger",components:{SectionHeader:L,BIconDownload:u["p"]},data:function(){return{stblFiles:null,decodedStbls:null,languages:B,outputLanguage:null,outputTGI:null,downloadUrl:"",downloadFilename:""}},computed:{allFilesDecoded:function(){return null!==this.stblFiles&&null!==this.decodedStbls&&this.stblFiles.length===this.decodedStbls.length},typeIsValid:function(){return"220557DA"===this.outputTGI.t},groupIsValid:function(){return/^([0-9A-F]{8})$/i.test(this.outputTGI.g)},instanceIsValid:function(){return this.instanceIs64Bit&&this.instanceMatchesLocale},instanceIs64Bit:function(){return/^([0-9A-F]{16})$/i.test(this.outputTGI.i)},instanceMatchesLocale:function(){return this.outputLanguage.stblCode===this.outputTGI.i.substr(0,2)}},watch:{allFilesDecoded:function(t){if(t){var e=[];this.decodedStbls.forEach((function(t){var n=t.stringEntries;n.forEach((function(t){e.push(t)}))}));var n=Object(N["a"])(e).toString("base64");this.downloadUrl="data:text/plain;base64,".concat(n),null===this.outputTGI&&(this.outputTGI={t:"220557DA",g:"80000000",i:"Unknown"}),null===this.outputLanguage&&(this.outputLanguage=E)}}},methods:{filesUploaded:function(){var t=this;this.decodedStbls=[],this.outputTGI=null,this.outputLanguage=null,this.stblFiles.forEach((function(e){Object(G["a"])(e).then((function(n){if(null!==n&&"string"!==typeof n)try{n.tgi=P(e.name),n.locale=j(n.tgi.i),void 0===n.locale&&(n.locale={name:"Unknown",emoji:"[?]"}),null===t.outputTGI&&(t.outputTGI=Object.assign({},n.tgi)),null===t.outputLanguage&&(t.outputLanguage=n.locale),t.decodedStbls.push(n)}catch(s){n.tgi={t:"220557DA",g:"80000000",i:"Unknown"},n.locale={name:"Unknown",emoji:"[?]"},t.decodedStbls.push(n)}else t.decodedStbls.push({tgi:{t:"220557DA",g:"80000000",i:"Invalid"},locale:{name:"Invalid",emoji:"[!]"},stringEntries:[],numEntries:"Invalid"})}))}))},updateLocaleInInstance:function(){this.outputTGI.i=this.outputLanguage.stblCode+this.outputTGI.i.substring(2)},download:function(t){if("s4s"===t){var e="".concat(this.outputTGI.t,"!").concat(this.outputTGI.g,"!").concat(this.outputTGI.i);this.downloadFilename="".concat(e,".").concat(this.outputLanguage.name,".StringTable.binary")}else{var n="".concat(this.outputTGI.t,"_").concat(this.outputTGI.g,"_").concat(this.outputTGI.i);this.downloadFilename="S4_".concat(n,".stbl")}var s=this.typeIsValid&&this.groupIsValid&&this.instanceIsValid;s||alert("Your string table either does not have a valid type, group, or instance, or its instance does not match the locale you have selected. You may experience issues when importing your string table to ".concat(t.toUpperCase(),"."))},hashNewInstance:function(){var t=prompt("Enter a name to hash for the instance ID of your string table. It should be a unique name, prefixed with your creator name, such as 'YourName:stringTable_UniqueDescription'.");if(t){var e=Object(A["fnv64"])(t).toString(16).toUpperCase().padStart(16,"0");this.outputTGI.i=this.outputLanguage.stblCode+e.substring(2)}}}}),K=J,R=(n("7e62"),Object(b["a"])(K,V,Y,!1,null,null,null)),q=R.exports,W=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{attrs:{id:"page-not-found"}},[n("b-container",{attrs:{fluid:""}},[n("h1",{staticClass:"mb-4"},[t._v("Legacy STBL Tools")]),n("p",[t._v("The string table "),n("a",{attrs:{href:"#/ts4-tools/stbl-editor"}},[t._v("editor")]),t._v(" and "),n("a",{attrs:{href:"#/ts4-tools/stbl-merger"}},[t._v("merger")]),t._v(" have been replaced with the new "),n("a",{attrs:{href:"https://stbl.sims4toolkit.com"}},[t._v("String Table Studio")]),t._v(". ")]),n("p",[t._v("They are preserved on this website. You can access them with the links above.")])])],1)},X=[],Q={name:"HomePage"},Z=Q,tt=(n("c97f"),Object(b["a"])(Z,W,X,!1,null,null,null)),et=tt.exports;s["default"].use(a["a"]),s["default"].use(o.a);var nt=[{path:"/ts4-tools/stbl-editor",component:$},{path:"/ts4-tools/stbl-merger",component:q},{path:"/page-not-found",component:S,meta:{title:"Page Not Found"}},{path:"/",component:et},{path:"*",redirect:"/page-not-found"}],st=new r["a"]({routes:nt});s["default"].config.productionTip=!1,s["default"].use(r["a"]),new s["default"]({router:st,watch:{$route:function(t,e){window.scrollTo(0,0)}},render:function(t){return t(p)}}).$mount("#app")},5982:function(t,e,n){},"5c0b":function(t,e,n){"use strict";var s=n("9c0c"),a=n.n(s);a.a},"5c4c":function(t,e,n){},"7e62":function(t,e,n){"use strict";var s=n("5982"),a=n.n(s);a.a},"8e78":function(t,e,n){"use strict";var s=n("9e68"),a=n.n(s);a.a},"9c0c":function(t,e,n){},"9e68":function(t,e,n){},b579:function(t,e,n){"use strict";var s=n("0a4e"),a=n.n(s);a.a},c97f:function(t,e,n){"use strict";var s=n("f529"),a=n.n(s);a.a},ccaf:function(t,e,n){"use strict";var s=n("5c4c"),a=n.n(s);a.a},d59c:function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return l})),n.d(e,"b",(function(){return u}));n("a9e3"),n("d3b7"),n("25f0"),n("96cf");var s=n("1da1"),a=n("d4ec"),i=n("bee2"),o=function(){function t(e){Object(a["a"])(this,t),this.buff=e,this.offset=0}return Object(i["a"])(t,[{key:"skip",value:function(t){this.offset+=t}},{key:"seek",value:function(t){var e=Number(t);if(e!=t)throw"This package exceeds size limitations.";this.offset=e}},{key:"chars",value:function(t){var e=this.buff.toString("utf-8",this.offset,this.offset+t);return this.offset+=t,e}},{key:"charsBase64",value:function(t){var e=this.buff.toString("base64",this.offset,this.offset+t);return this.offset+=t,e}},{key:"uint8",value:function(){var t=this.buff.readUInt8(this.offset);return this.offset+=1,t}},{key:"uint16",value:function(){var t=this.buff.readUInt16LE(this.offset);return this.offset+=2,t}},{key:"uint32",value:function(){var t=this.buff.readUInt32LE(this.offset);return this.offset+=4,t}},{key:"uint64",value:function(){return this.uint32()+this.uint32()}}]),t}();function r(t){if("STBL"!==t.chars(4))throw"Not a string table.";if(5!==t.uint16())throw"Not a string table.";var e={};t.skip(1),e.numEntries=t.uint64(),t.skip(2),e.totalStringLength=t.uint32(),e.stringEntries=[];for(var n=0;n<e.numEntries;n++){var s={};s.key=t.uint32(),t.skip(1),s.length=t.uint16(),s.string=t.chars(s.length),e.stringEntries.push(s)}return e}function l(t){return c.apply(this,arguments)}function c(){return c=Object(s["a"])(regeneratorRuntime.mark((function e(n){var s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n){e.next=2;break}return e.abrupt("return",null);case 2:return e.prev=2,e.next=5,n.arrayBuffer();case 5:return s=e.sent,e.abrupt("return",r(new o(t.from(s))));case 9:return e.prev=9,e.t0=e["catch"](2),e.abrupt("return","".concat(e.t0));case 12:case"end":return e.stop()}}),e,null,[[2,9]])}))),c.apply(this,arguments)}function u(t){return h.apply(this,arguments)}function h(){return h=Object(s["a"])(regeneratorRuntime.mark((function e(n){var s,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n){e.next=2;break}return e.abrupt("return",null);case 2:return e.prev=2,e.next=5,n.arrayBuffer();case 5:return s=e.sent,a=t.from(s).toString("utf-8"),e.abrupt("return",JSON.parse(a));case 10:return e.prev=10,e.t0=e["catch"](2),e.abrupt("return","".concat(e.t0));case 13:case"end":return e.stop()}}),e,null,[[2,10]])}))),h.apply(this,arguments)}}).call(this,n("b639").Buffer)},f155:function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return o}));n("4160"),n("ac1f"),n("5319"),n("159b");var s=n("d4ec"),a=n("bee2"),i=function(){function e(t){Object(s["a"])(this,e),this.buff=t,this.offset=0}return Object(a["a"])(e,[{key:"skip",value:function(t){this.offset+=t}},{key:"chars",value:function(e,n){this.offset+=this.buff.write(e,this.offset,n||t.byteLength(e))}},{key:"_uint",value:function(t,e){this.offset=this.buff.writeUIntLE(t,this.offset,e)}},{key:"uint16",value:function(t){this._uint(t,2)}},{key:"uint32",value:function(t){this._uint(t,4)}},{key:"uint64",value:function(t){this.uint32(t),this.skip(4)}}]),e}();function o(e){var n=21,s=e.length;e.forEach((function(e){e.string=e.string.replace(/(\r\n|\r|\n)/g,"\\n"),e.numBytes=t.byteLength(e.string),s+=e.numBytes,n+=7+e.numBytes}));var a=t.alloc(n),o=new i(a);return o.chars("STBL",4),o.uint16(5),o.skip(1),o.uint64(e.length),o.skip(2),o.uint32(s),e.forEach((function(t){o.uint32(t.key),o.skip(1),o.uint16(t.numBytes),o.chars(t.string,t.numBytes)})),a}}).call(this,n("b639").Buffer)},f529:function(t,e,n){}});
//# sourceMappingURL=app.68c7776b.js.map